# ì˜ì–´ìŠ¤í„°ë”” ì‹œì¦Œ 4 5ì£¼ì°¨

[ì˜ìƒ](https://www.youtube.com/watch?v=I56uHKcuAaw)

# Kotlin ì˜ ìœ„ì„

- Delegateë€ ë¬´ì—‡ì¸ê°€?
- Kotlin Class Delegate 
- Kotlin Property Delegate

#### Delegation Pattern (ìœ„ì„ íŒ¨í„´)

ìœ„ì„ íŒ¨í„´ì€ Delegateë¼ëŠ” í—¬í¼ ê°ì²´ì— ê°ì²´ë¥¼ ìœ„ì„í•˜ì—¬ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë””ìì¸ íŒ¨í„´ ì…ë‹ˆë‹¤. DelegateëŠ” ì›ë˜ ê°ì²´ë¥¼ ëŒ€ì‹ í•˜ì—¬ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ê²°ê³¼ë¥¼ ë°˜í™˜í•  ì±…ì„ì´
ìˆìŠµë‹ˆë‹¤.

### Kotlin ì—ì„œ Delegate Pattern
ì½”í‹€ë¦°ì€ by ë¼ëŠ” í‚¤ì›Œë“œë¥¼ í†µí•´ì„œ Delegate Pattern ë¥¼ ìì²´ì ìœ¼ë¡œ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ ìì²´ ì ì¸ ì§€ì› í•´ì¤ë‹ˆë‹¤.

__Class Delegate__

ì˜ˆì‹œ. collection ì—ì„œ ë§ˆì§€ë§‰ì— ì œê±°ëœ ì•„ì´í…œì„ ë‹¤ì‹œ ë³µêµ¬í•˜ëŠ” ì‚¬ë¡€

- byë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ ë•Œ 

```
class NoByUsingArrayList<T> : ArrayList<T>{
var deleteItem :T? = null 
 ...
 ovrrerid fun remove(item:T):Boolean{
   deleteItem = item
   return super.remove(item)
 }
 
 fun recover():T{  
     return deleteItem   
   }
}

fun main{
  val list:CustomArrayList<Int> = list(1,2,3,4)
  
  list.remove(item)
  println(list.recover().toString())
}


```   

- byë¥¼ ì‚¬ìš©

```
class ByUsingArrayList<T>(
  private val innerList:MutableList<T> = ArrayList<T>()
):MutableList<T> by innerList {
   
   ...
   //innerList ê°ì²´ì— ëŒ€í•œ ì •ì˜ë¥¼ ë§ˆìŒê» í•  ìˆ˜ ìˆë‹¤.
   ovrrerid fun remove(item:T):Boolean{
     deleteItem = item
     innerList.remove(item)
  }
}

```
ìœ„ ì˜ˆì‹œì—ì„œ byë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš°ëŠ” í´ë˜ìŠ¤ë¥¼ ì•„ì˜ˆ ìƒˆë¡œ ì •ì˜ í•œ ê²ƒì´ë¼ì„œ, ìˆ˜ì •ì´ë‚˜ í™•ì¥ì´ í•„ìš”í•œê²½ìš° í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ì•„ì˜ˆ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.   
byë¥¼ ì‚¬ìš©í•œ ê²½ìš° ì´ë¯¸ ë§Œë“¤ì–´ì§„ ê°ì²´ì— í•œë²ˆ ë” ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤ì„ ì‰½ê²Œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

__* Byë¥¼ ì ìš©í•œ Classë¥¼ Java ì»´íŒŒì¼ëŸ¬ ë³€í™˜ *__ 
byë¥¼ ì‚¬ìš©í•œ í´ë˜ìŠ¤ë¥¼ java ì»´íŒŒì¼ëŸ¬ë¡œ ë³€í™˜ì‹œ, ìœ„ì„ì„ ìš”ì²­í•œ í•´ë‹¹ ê°ì²´ì˜ ë©”ì„œë“œ ë“¤ì´ ëª¨ë‘ ë³µì‚¬ë˜ì–´ í•´ë‹¹ í´ë˜ìŠ¤ì— ì •ì˜ ë¨ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
class ByUsingArrayList<T>(
  private val innerList:MutableList<T> = ArrayList<T>()
):MutableList<T> by innerList ë¥¼ ì»´íŒŒì¼ ì‹œ 

pubilc class ByUsingArrayList
...
...
pubilc void add(){ }
pubilc void contains(){ }
...

MutableListì˜ ëª¨ë“  ë©”ì„œë“œë“¤ì´ ë³µì‚¬ë˜ì–´ìˆëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŒ
```

ë˜í•œ kotlin by ìœ„ì„ì ë‚´ë¶€ì ìœ¼ë¡œ ë°ì½”ë ˆì´í„° íŒ¨í„´ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë°ì½”ë ˆì´í„° íŒ¨í„´ì„ ì‚¬ìš©í•´ì„œ ìƒì„±ëœ ì½”ë“œì—ì„œ í´ë˜ìŠ¤ ìœ„ì„ì„ ì§€ì›í•©ë‹ˆë‹¤.
ë°ì½”ë ˆì´í„°íŒ¨í„´ì—ì„œ ë°ì½”ë ˆì´í„° í´ë˜ìŠ¤ëŠ” ë°ì½”ë ˆì´í„°í•  í´ë˜ìŠ¤ì™€ ë™ì¼í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê³µìœ í•©ë‹ˆë‹¤.
ë°ì½”ë ˆì´í„° í´ë˜ìŠ¤ëŠ” ëŒ€ìƒí´ë˜ìŠ¤ì˜ ë‚´ë¶€ ì°¸ì¡°ë¥¼ ìœ ì§€í•˜ê³  ì¸í„°í˜ì´ìŠ¤ì™€ í•¨ê»˜ ì œê³µë˜ëŠ” ëª¨ë“  ê³µìš© ë©”ì„œë“œë¥¼ ë˜í•‘í•˜ê±°ë‚˜ ì¥ì‹í•©ë‹ˆë‹¤



__Kotlin Property Delegate__
property ìœ„ì„ì€ í•´ë‹¹ propertyì˜ set() , get() ì„ ìœ„ì„í•´ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì„¸íƒ€/ê²Œíƒ€ë¥¼ ë¯¸ë¦¬ ì •ì˜ í•´ë†“ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ê°ì²´ì—ì„œë„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê±°ë‚˜ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆì–´ì„œ ìš©ì´í•©ë‹ˆë‹¤   
   
ì˜ˆì‹œ. Person í´ë˜ìŠ¤ì˜ set(),get()   
   
-byë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ë•Œ
```
/** ëª¨ë“  classì˜ property setí• ë•Œ ì†Œë¬¸ìë¡œ ë°”ë€Œë©´ì„œ updateCountê°€ ì¦ê°€ í•´ì•¼ í•˜ëŠ” ê²½ìš° **/
class Person(var name:String, var lastname:String){
   var name: String = name 
      set(value){
         name = value.toLowerCase().capitalize()
         updateCount++
        }
        
   //ë°˜ë³µì ìœ¼ë¡œ setterì •ì˜ë¥¼ ì‚¬ìš©í•´ì•¼í•¨      
   var lastname: String = name 
      set(value){
         name = value.toLowerCase().capitalize()
         updateCount++
        }
   
   var updateCount = 0 
  }
```

-byë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ 
```
class Person(var name:String, var lastname:String){
//by ë¥¼ ì‚¬ìš©ì‹œ setter ì •ì˜ë¥¼ ì¬ì‚¬ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   var name: String by FormatDelegate()
   var lastname: String by FormatDelegate()
   var updateCount = 0 
}

class FormatDelegate : ReadWirteProperty<Any?,String>{
   private val formattedString: String = ""
   
   /**
   * thisRef ëŠ” í•´ë‹¹ ê°ì²´ì˜ ìë£Œí˜• ìì²´
   * property ëŠ” ìœ„ì„ëœ ì†ì„±ì˜ ë°ì´í„° ê·¸ ìì²´ 
   * valueëŠ” setterë¡œ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ì˜¨ ê°’  
   */
   overrid fun setValue(
      thisRef: Any?,
      property: KProperty<*>,
      value: String
   ){
       
   formattedString = value.toLowerCase().capitalize()
   //by ë¥¼ ì‚¬ìš©í•œ setter ì •ì˜ í• ë•Œ ì•„ë˜ì™€ ê°™ì€ ì˜ˆì‹œë¡œ í´ë˜ìŠ¤ì— ë”°ë¼ settar ë¶„ê¸° ì²˜ë¦¬ë„ ê°€ëŠ¥í•´ì§
   if(thisRef is Person && !property.equals(formattedString){
      thisRef.updateCount ++ 
   }
   
   ...
  }
}
```

__Delegatesì˜ ê°•ì __ 
ìœ„ì„ì€ íŠ¹ì • í´ë˜ìŠ¤ì—ì„œ ìƒì†í•  ìˆ˜ ì—†ì„ ë•Œ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤.
ìœ„ì„ì„ ì‚¬ìš©í•˜ë©´ í´ë˜ìŠ¤ê°€ í•´ë‹¹ ê³„ì¸µêµ¬ì¡°ì˜ ì¼ë¶€ê°€ ì•„ë‹™ë‹ˆë‹¤. 
ëŒ€ì‹  ê³µì¼í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê³µìœ í•˜ê³  ì›ë˜ ìœ í˜• ë‚´ë¶€ê°ì²´ë¥¼ ì¥ì‹í•©ë‹ˆë‹¤.
ì¦‰ ê³µê°œAPIë¥¼ ì¤‘ë‹¨í•˜ì§€ ì•Šê³  ë‚´ë¶€ êµ¬í˜„ì„ ì‰½ê²Œ ì „í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


# ğŸ“— ë‹¨ì–´ ì •ë¦¬ ğŸ“˜

|ì˜ì–´|í•œê¸€|
|---|---|
|Vocabulary|ì–´íœ˜|
|responsible|ì±…ì„ì„ ì ¸ì•¼í•˜ëŠ”|
|on behalf of|ëŒ€ì‹ í•˜ì—¬|
