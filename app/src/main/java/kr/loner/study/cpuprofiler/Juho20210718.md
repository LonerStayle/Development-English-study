# Inspect system traces: Process Memory (RSS) ~ Generate Trace Logs by Instrumenting Your App     
    
### Inspect system traces: Process Memory (RSS)

![0](https://user-images.githubusercontent.com/52353492/126028693-04aed035-0088-4cc1-911f-863f7c7bcfaf.PNG)

- í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ëŠ” í¬ê²Œ 4ê°€ì§€ë¡œ êµ¬ë¶„ë˜ì–´ ì•±ì—ì„œ í˜„ì¬ ì‚¬ìš©ì¤‘ì¸ ì‹¤ì œ ë©”ëª¨ë¦¬ì˜ ì–‘ì„ í‘œì‹œí•œë‹¤.
- Total : í”„ë¡œì„¸ìŠ¤ì—ì„œ í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ ì‹¤ì œ ë©”ëª¨ë¦¬ì˜ ì´ëŸ‰
- Allocated : ì¼ë°˜ ë©”ëª¨ë¦¬ í• ë‹¹ì— í˜„ì¬ ì‚¬ìš©ë˜ëŠ” ì‹¤ì œ ë©”ëª¨ë¦¬ì˜ ì–‘ (ëŒ€ë¶€ë¶„ í™ê³¼ ìŠ¤íƒ ë©”ëª¨ë¦¬ë¡œ êµ¬ì„±)
- File Mappings : íŒŒì¼ ë§¤í•‘ì— ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ì˜ ì–‘
- Shared : ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ ê°„ì— ë©”ëª¨ë¦¬ë¥¼ ê³µìœ í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ì˜ 

### Interpretation

For apps deployed to devices running Android 9 or higher, the Process Memory (RSS) section shows the amount of physical memory currently in use by the app.

ì•ˆë“œë¡œì´ë“œ 9 í˜¹ì€ ì´ìƒì˜ ê¸°ê¸°ì—ì„œ ë°°í¬ëœ ì•±ì˜ ê²½ìš° í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì„¹ì…˜ì€ ì•±ì—ì„œ ì‚¬ìš©ë˜ëŠ” í˜„ì¬ ì‹¤ì œ ë©”ëª¨ë¦¬ì˜ ì–‘ì„ ë³´ì—¬ì¤€ë‹¤.

Total
This is the total amount of physical memory currently in use by your process. On Unix-based systems, this is known as the "Resident Set Size", and is the combination of all the memory used by anonymous allocations, file mappings, and shared memory allocations.
For Windows developers, Resident Set Size is analogous to the Working Set Size.

í”„ë¡œì„¸ìŠ¤ì— ì˜í•´ ì‚¬ìš©ë˜ëŠ” í˜„ì¬ ë©”ëª¨ë¦¬ì˜ ì‹¤ì œ ì´í•©ì´ë‹¤. ìœ ë‹‰ìŠ¤ ì‹œìŠ¤í…œì—ì„œ Resident Set Sizeë¡œ ì•Œë ¤ì ¸ìˆë‹¤. ê·¸ë¦¬ê³  ìµëª…ì˜ í• ë‹¹ë“¤, íŒŒì¼ ë§µí•‘ë“¤, ê³µìœ  ë©”ëª¨ë¦¬ í• ë‹¹ì˜ ì¡°í•©ì´ë‹¤. ìœˆë„ìš° ê°œë°œìì˜ ê²½ìš° RSSëŠ” WSSì™€ ìœ ì‚¬í•˜ë‹¤.

Allocated
This counter tracks how much physical memory is currently used by the process's normal memory allocations. These are allocations which are anonymous (not backed by a specific file) and private (not shared). In most applications, these are made up of heap allocations (with malloc or new) and stack memory. When swapped out from physical memory, these allocations are written to the system swap file.

ì´ ì¹´ìš´í„° íŠ¸ë™ì€ ê¸°ë³¸ ë©”ëª¨ë¦¬í• ë‹¹ í”„ë¡œì„¸ìŠ¤ì— ì˜í•´ ì‚¬ìš©ë˜ëŠ” í˜„ì¬ ë©”ëª¨ë¦¬ ì¶”ì í•œë‹¤. ì´ëŠ” ìµëª…(íŠ¹ì • íŒŒì¼ì„ ì§€ì› í•˜ì§€ì•ŠìŒ)ê³¼ ë¹„ê³µê°œ(ê³µìœ ë˜ì§€ ì•ŠìŒ)ì¸ í• ë‹¹ì´ë‹¤. ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” í™ í• ë‹¹ê³¼ ë©”ëª¨ë¦¬í• ë‹¹ì— ì˜í•´ êµ¬ì„±ëœë‹¤. ë©”ëª¨ë¦¬ì—ì„œ êµì²´ê°€ ì¼ì–´ë‚  ë•Œ, ì´ëŸ¬í•œ í• ë‹¹ì€ ì‹œìŠ¤í…œ ìŠ¤ì™‘ íŒŒì¼ì— ê¸°ë¡ëœë‹¤.

File Mappings
This counter tracks the amount of physical memory the process is using for file mappings â€“ that is, memory mapped from files into a region of memory by the memory manager.

ì´ ì¹´ìš´í„° íŠ¸ë™ì€ íŒŒì¼ ë§¤í•‘ì— ì‚¬ìš©í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ë¥¼ ì¶”ì í•œë‹¤. ì¦‰, ë©”ëª¨ë¦¬ ê´€ë¦¬ìì— ì˜í•´ íŒŒì¼ì—ì„œ ë©”ëª¨ë¦¬ë¡œ ë§¤í•‘í•œ ë©”ëª¨ë¦¬ì´ë‹¤.

Shared
This counter tracks how much physical memory is being used to share memory between this process and other processes in the system.

ì´ ì¹´ìš´í„° íŠ¸ë™ì€ ì‹œìŠ¤í…œì—ì„œ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ì™€ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ ê°„ì— ê³µìœ í•˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ ì¶”ì í•œë‹¤. 

## PS

![1](https://user-images.githubusercontent.com/52353492/126028690-75d6ab39-359c-4314-8aa3-aeb3e6a7a2b7.PNG)

ê°œìš”ë¥¼ ë§ˆì¹˜ê³  Profileì„ í†µí•´ í˜„ì¬ ê°œë°œ ì¤‘ì¸ ì•±ì— ì ìš©ì‹œì¼œ ë³´ì•˜ë‹¤. í´ë¦­ ì´ë²¤íŠ¸ë¶€í„° í˜„ì¬ ì•¡í‹°ë¹„í‹°ê°€ ë¬´ì—‡ì¸ì§€ (ì´ê±´ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ë¥¼ ì°¸ê³ í•˜ê±°ë‚˜ ì¶”í›„ ìœ ì§€ë³´ìˆ˜í•˜ê²Œ ë  ê²½ìš° ìš”ê¸´í•˜ê²Œ ì“°ì¼ ê²ƒ ê°™ë‹¤), ë©”ëª¨ë¦¬ ë„¤íŠ¸ì›Œí¬ ë“±ì„ íŒŒì•…í•  ìˆ˜ ìˆì—ˆë‹¤. ê°ê°ì˜ ìŠ¤ë ˆë“œë“¤ì´ ì–¼ë§ˆë‚˜ ë©”ëª¨ë¦¬ë¥¼ ì°¨ì§€í•˜ëŠ”ì§€ëŠ” ë” ë³µì¡í•œ ì‘ì—…ì¼ ë•Œ ë³´ê² ì§€ë§Œ ìº¡ì²˜í™”ë©´ì—ì„œ ë³´ì´ëŠ” ê²ƒì²˜ëŸ¼ íŒŒë€ìƒ‰ ê·¸ë˜í”„ëŠ” ì›¹ë·°ì—ì„œ ì²« ì´ˆê¸°í™” ì‹œ ë¸Œë¦¿ì§€ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ë•Œì´ê³  ì£¼í™©ìƒ‰ìœ¼ë¡œ í‘œì‹œëœ ì „ì†¡ ë„¤íŠ¸ì›Œí¬ ê·¸ë˜í”„ëŠ” ë‚´ í™”ë©´ FMCSë¥¼ Web-RTCë¥¼ í†µí•´ ë³´ë‚¸ ê·¸ë˜í”„ì´ë‹¤. ì´ˆë°˜ì— êº½ì„ì„ ì´ ì˜ ë³´ì¼ ë• ì •ìƒì ìœ¼ë¡œ ì „ì†¡í•˜ëŠ” ëª¨ìŠµì´ê³  ì´í›„ êº½ì„ì„ ì´ ì¢í˜€ì§€ëŠ” ê²ƒì€ ìœ ì €ì˜ í™”ë©´ì„ ì „ì†¡í•˜ì§€ ì•ŠëŠ” ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ë°œìƒí•˜ëŠ” ëª¨ìŠµì´ë‹¤.

---------------------------------------------------------------------------

### Generate Trace Logs by Instrumenting Your App

- ì½”ë“œë¥¼ ì´ìš©í•´ì„œ ì•± ì‹¤í–‰ ì •ë³´ë¥¼ ê¸°ë¡í•˜ëŠ” ê²ƒì„ ê´€ë¦¬ í•  ìˆ˜ ìˆë‹¤. ì‹œì‘í•˜ëŠ” ì§€ì ê³¼ ì¤‘ì§€í•˜ëŠ” ì§€ì ì„ ì •í™•í•˜ê²Œ ëª…ì‹œí•  ìˆ˜ ìˆë‹¤. ê¸°ë¡ëœ ì •ë³´ëŠ” CPU í”„ë¡œíŒŒì¼ëŸ¬ë¥¼ ì‚¬ìš©í•´ íŠ¸ë ˆì´ìŠ¤ë¥¼ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.
    - ì•± ê¸°ë¡ ì‹œì‘ : startMethodTracing()
    - ì•± ê¸°ë¡ ì¤‘ì§€ : stopMethodTracing()

- ì•±ì—ì„œ ì—¬ëŸ¬ë²ˆ ê¸°ë¡ì„ í•˜ëŠ”ë° ì´ë¦„ì„ ë³€ê²½ í•˜ì§€ ì•Šì„ ê²½ìš° ê¸°ì¡´ ë¡œê·¸ë¥¼ ë®ì–´ì“´ë‹¤. ê·¸ë˜ì„œ ì—¬ëŸ¬ ë¡œê·¸ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œëŠ” ë™ì ìœ¼ë¡œ ì €ì¥í•´ì£¼ì–´ì•¼ í•œë‹¤. ê³µì‹ ë¬¸ì„œì—ì„œëŠ” ë‚ ì§œì™€ ì‹œê°„ì„ í†µí•´ ì €ì¥í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.

- íŠ¸ë ˆì´ìŠ¤ ë¡œê·¸ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ View > Tool Windows > Device File Explorer í´ë¦­ í›„ .trace íŒŒì¼ì„ ë³´ë©´ ëœë‹¤.

### Interpretation

To generate a method trace of your app's execution, you can instrument your app using the Debug class. Instrumenting your app this way gives you more control over exactly when the device starts and stops recording tracing information. The device also saves your trace logs using the names you specify, so you can easily identify each log later. You can then view each trace log using the Android Studio CPU Profiler.

ì•± ì‹¤í–‰ ë©”ì†Œë“œ íŠ¸ë ˆì´ìŠ¤ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œ ë””ë²„ê·¸ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•±ì„ ê³„ì¸¡í•  ìˆ˜ ìˆë‹¤. ê³„ì¸¡ì€ ê¸°ê¸° ì¶”ì  ì •ë³´ë¥¼ ê¸°ë¡í•˜ëŠ” ì‹œì‘ê³¼ ì¢…ë£Œ ì§€ì ì„ ì¡°ê¸ˆ ë” ì •í™•í•˜ê²Œ ì œê³µí•œë‹¤. ê¸°ê¸°ëŠ” ë˜í•œ íŠ¹ì • ì´ë¦„ì„ ì‚¬ìš©í•˜ì—¬ ì¶”ì  ë¡œê·¸ë¥¼ ê¸°ë¡í•˜ë©° ì†ì‰½ê²Œ ê°ê°ì˜ ë¡œê·¸ë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤. ì•ˆë“œë¡œì´ë“œ ìŠ¤íŠœë””ì˜¤ CPU Profilerë¥¼ ì‚¬ìš©í•´ ê°ê°ì˜ ì¶”ì  ë¡œê·¸ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

You can also start and stop tracing in the CPU Profiler without instrumenting your app's code.
Before you start generating trace logs, make sure your app has added logic to save trace logs to its app-specific directory.

ë˜í•œ ê³„ì¸¡í•˜ëŠ” ì•± ì½”ë“œ ì—†ì´ë„ CPU í”„ë¡œíŒŒì¼ëŸ¬ì—ì„œ ì‹œì‘ê³¼ ì¢…ë£Œë¥¼ ì¶”ì í•  ìˆ˜ ìˆë‹¤. ì¶”ì  ë¡œê·¸ë¥¼ ì‹œì‘í•˜ê¸° ì „ì— ì•± íŠ¹ì • í´ë”ì— ì €ì¥í•˜ê¸°ìœ„í•œ ì¶”ê°€ ë¡œì§ì´ ìˆëŠ”ì§€ í™•ì‹¤íˆ í•´ì•¼í•œë‹¤.

Instrument your app
To create trace logs, call startMethodTracing() where you want the system to start logging tracing data.
In the call, you can specify the name for the .trace file, and the system saves it to a package-specific directory that's intended for persistent app data on the target deviceâ€”this is the same directory that is returned by getExternalFilesDir() and is located in the ~/sdcard/ directory on most devices. This file contains the binary method trace data and a mapping table with thread and method names. To stop tracing, call stopMethodTracing().

    ```
    Debug.startMethodTracing("sample")
    Debug.stopMethodTracing()
    ```
    
ì¶”ì  ë¡œê·¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œ, ì›í•˜ëŠ” ì§€ì ì— startMethodTracing()ë¥¼ í˜¸ì¶œí•œë‹¤. í˜¸ì¶œ ì‹œ .trace íŒŒì¼ë¡œ ì´ë¦„ì„ ì§€ì •í•  ìˆ˜ ìˆê³  ì‹œìŠ¤í…œì€ íŒŒì¼ì€ ì €ì¥í•œë‹¤. ì´ ë””ë ‰í„°ë¦¬ëŠ” ëŒ€ë¶€ë¶„ì˜ ê¸°ê¸°ì—ì„œ ~/sdcard ì— ìœ„ì¹˜í•œë‹¤. ì¶”ì ì„ ì¤‘ì§€í•˜ë ¤ë©´ stopMethodTracing()ì„ í˜¸ì¶œí•œë‹¤.

Note that if your app calls the startMethodTracing() again without changing the name of the trace log, it overwrites the existing log saved to the device. To learn how to dynamically change the name of each trace log, go to the section about saving multiple logs.

startMethodTracing() ë©”ì†Œë“œë¥¼ ì´ë¦„ ë³€ê²½ì—†ì´ ë°˜ë³µí•´ì„œ í˜¸ì¶œí•œë‹¤ë©´ ê¸°ì¡´ì— ì €ì¥ëœ ë¡œê·¸ë¥¼ ë®ì–´ì“°ê¸°í•œë‹¤.

If the system reaches the maximum buffer size before you call stopMethodTracing(), the system stops tracing and sends a notification to the console. The methods that start and stop traces work across your entire app process. That is, you could call startMethodTracing() in your activity's onCreate(Bundle) method, and call stopMethodTracing() in that activity's onDestroy() method.

ì‹œìŠ¤í…œì´ stopMethodTracing()ë¥¼ í˜¸ì¶œí•˜ê¸° ì „ì— ìµœëŒ€ ë²„í¼ ì‚¬ì´ì¦ˆì— ë„ë‹¬í•œë‹¤ë©´ ì‹œìŠ¤í…œì€ ì¶”ì ì„ ì¤‘ì§€í•˜ê³  ê³µì§€ë¥¼ ì½˜ì†”ì— ì „ì†¡í•œë‹¤. ì¶”ì  ì‹œì‘ê³¼ ì¤‘ì§€ëŠ” ì•± í”„ë¡œì„¸ìŠ¤ ì „ì²´ì— ì‘ë™í•œë‹¤. ì¦‰, ì•¡í‹°ë¹„í‹° onCreateì—ì„œ ì‹œì‘í•˜ê³  onDestroyì—ì„œ ì¤‘ì§€ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

Note that your app runs more slowly when profiling is enabled. That is, you shouldn't use the profiling data to determine absolute timings (such as, "method foo() takes 2.5 seconds to run"). The timing information in the trace logs are useful only when comparing it to previous trace logs, so you can see if recent changes make your app faster or slower.

í”„ë¡œíŒŒì¼ë§ì€ ì•±ì„ ëŠë¦¬ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì¦‰, ì ˆëŒ€ì ì¸ ì‹œê°„ì„ íŒë‹¨í•˜ê¸° ìœ„í•´ì„œ í”„ë¡œíŒŒì¼ë§ì„ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.

When deploying to devices running Android 5.0 (API level 21) and higher, you can use sample-based profiling to profile with less runtime performance impact. To enable sample profiling, call startMethodTracingSampling() (instead of calling startMethodTracing()) with a specified sampling interval. The system gathers samples periodically until your app calls stopMethodTracing().

API 21 ì´ìƒì˜ ê¸°ê¸°ì—ì„œ startMethodTracing() ëŒ€ì‹  startMethodTracingSampling() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ëŸ°íƒ€ì„ ì„±ëŠ¥ì„ ìµœì†Œí™” í•  ìˆ˜ ìˆë‹¤.

Save multiple logs
If your app starts and stops a method trace multiple times without specifying a new name for the trace log, the device overwrites the older trace log with the new oneâ€”that is, it only keeps the most recent trace log. To save multiple trace logs to your device, dynamically rename the trace log each time your app calls startMethodTracing(). The sample below uses the SimpleDateFormat class to include the current date and time when naming each trace log:

    ```
    // the current date and time.
    val dateFormat: DateFormat = SimpleDateFormat("dd_MM_yyyy_hh_mm_ss", Locale.getDefault())
    val logDate: String = dateFormat.format(Date())
    // Applies the date and time to the name of the trace log.
    Debug.startMethodTracing("sample-$logDate")
    ```
ìƒˆë¡œìš´ ì´ë¦„ìœ¼ë¡œ íŠ¹ì •í•˜ì§€ ì•Šê³  ì—¬ëŸ¬ë²ˆ ì‹œì‘ ë° ì¤‘ì§€í•œë‹¤ë©´ ì˜¤ë˜ëœ ì¶”ì  ë¡œê·¸ëŠ” ë®ì—¬ì“°ê¸° ëœë‹¤. ì—¬ëŸ¬ ì¶”ì  ê¸°ë¡ì„ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ë™ì ìœ¼ë¡œ ê°ê°ì˜ ì‹œê°„ì„ ì§€ì–´ì¤€ë‹¤. ì˜ˆë¡œ SImpleDataFormat í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•´ í˜„ì¬ ë‚ ì§œì™€ ì‹œê°„ì„ í¬í•¨í•´ ê°ê°ì˜ ì¶”ì  ë¡œê·¸ë¥¼ ë„¤ì´ë° í•œë‹¤.

---------------------------------------------------------------------------
## ğŸ“— ë‹¨ì–´ ì •ë¦¬ ğŸ“˜   
   
|ì˜ì–´|í•œê¸€|
|---|---|
|analogous|ìœ ì‚¬í•œ|
|that is|ì¦‰|
|generate|ìƒì„±í•˜ë‹¤|
|instrument|ê³„ì¸¡|
