# ì˜ì–´ìŠ¤í„°ë”” ì‹œì¦Œ 4 8ì£¼ì°¨

created by [juho](https://github.com/pachuho/Development-English-study) on 2021-12-19

https://itnext.io/android-11-toast-updates-7f1cd2245bc4
https://developer.android.com/reference/android/widget/Toast#setGravity(int,%20int,%20int)

# ğŸ“— ë‹¨ì–´ ì •ë¦¬ ğŸ“˜

### OBS BUILD
|ì˜ì–´|í•œê¸€|
|---|---|
|no-op (no operation)|ì¡°ì¢… ë¶ˆëŠ¥ì˜| 

------------------------------

# Android 11 Toast Updates
Android 11 (R) is the next generation of Android in 2020 and Google has released the Android 11 Preview 2.1 in early April for developerâ€™s review.
`ì•ˆë“œë¡œì´ë“œ 11ì€ ì•ˆë“œë¡œì´ë“œ 2020ì˜ ë‹¤ìŒ ì„¸ëŒ€ì´ë©° êµ¬ê¸€ì€ ê°œë°œë¦¬ë·°ì— 4ì›”ì´ˆ ì•ˆë“œë¡œì´ë“œ í”„ë¦¬ë·°ë¥¼ ë°°í¬í–ˆìŠµë‹ˆë‹¤.`

There are a lot of changes and one of the changes catches my attention â€” New Toast behaviour and restrictions on customisation.
`ë§ì€ ë³€í™”ê°€ ìˆìœ¼ë©° ë³€í™”ì¤‘ í•˜ë‚˜ì— ì§‘ì¤‘í–ˆìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ Toastì˜ ì›€ì§ì„ê³¼ ì»¤ìŠ¤í…€ ì œì•½ì— ëŒ€í•´.`

In Android 11 (R), Google implements the following changes on Toast and they will be discussed in details in this article:
`ì•ˆë“œë¡œì´ë“œ 11ì—ì„œ êµ¬ê¸€ì€ Toast ì•„ë˜ì™€ ê°™ì€ ë³€í™”ë“¤ì„ ì‹¤ì‹œí–ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ë²ˆ ì•„í‹°í´ë ˆì„  ì„¸ë¶€ì‚¬í•­ì„ í† ì˜í• ê²ë‹ˆë‹¤.`

1. Background customised Toast is prohibited (See the cover photo)
`ë°±ê·¸ë¼ìš´ë“œ ì»¤ìŠ¤í…€ í† ìŠ¤íŠ¸ëŠ” ì œí•œë©ë‹ˆë‹¤.`

2. Customisation is not allowed at â€œtext Toastâ€
`ì»¤ìŠ¤í…€ì€ í…ìŠ¤íŠ¸ í† ìŠ¤íŠ¸ì—ì„œ í—ˆìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`

3. Deprecated function â€” setView()
`setView() í•¨ìˆ˜ëŠ” ë””í”„ë¦¬ì¼€ì´í‹°ë“œë©ë‹ˆë‹¤.`

4. Newly added callback â€” Toast.Callback
`ìƒˆë¡œìš´ ì½œë°±ì´ ì¶”ê°€ë©ë‹ˆë‹¤.`
   

### 1. Background customised Toast is prohibited (See the cover photo)
```
val customToast = Toast(this).also {
val view = LayoutInflater.from(context).inflate(R.layout.foo_custom_toast, null)
it.setView(view)
it.duration = Toast.LENGTH_LONG
it.setGravity(Gravity.START, 0, 0)
it.setMargin(0.1f, 0.2f)
}
```
![img.png](img.png)

Custom Toast CANNOT be shown when app is at the background. 
`ì»¤ìŠ¤í…€ í† ìŠ¤íŠ¸ëŠ” ë°±ê·¸ë¼ìš´ë“œì¼ ë•Œ ë³´ì—¬ì§ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`

A Toast with message â€œBackground custom toast blocked for package [packageName] See g.co/dev/toast.â€ is shown instead.
`í† ìŠ¤íŠ¸ëŠ” ë³´ì—¬ì§€ëŠ” ëŒ€ì‹ ì— "ë°±ê·¸ë¼ìš´ë“œ ì»¤ìŠ¤í…€ì€ í•´ë‹¹ íŒ¨í‚¤ì§€ì—ì„œ ì°¨ë‹¨í–ˆìŠµë‹ˆë‹¤"ë¼ëŠ” ë©”ì„¸ì§€ê°€ ë‚˜ì˜µë‹ˆë‹¤.`

### 2. Customisation is not allowed at â€œtext Toastâ€
```
val customToast = Toast.makeText(this, "Custom Text Toast\n(Gravity + Margin)", Toast.LENGTH_SHORT).also {
it.setGravity(Gravity.START or Gravity.BOTTOM, 0, 0)
it.setMargin(0.1f, 0.06f)
it.show()
```

Before Android R, both simple Toast and text Toast can be customised with the margins and gravity with offsets. 
`ì•ˆë“œë¡œì´ë“œ R ì´ì „ì— ê°„ë‹¨í•œ í† ìŠ¤íŠ¸ì™€ í…ìŠ¤íŠ¸ í† ìŠ¤íŠ¸ëŠ” ì—¬ë°±ê³¼ ìœ„ì¹˜ ì˜¤í”„ì…‹ìœ¼ë¡œ ì»¤ìŠ¤í…€ë  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.`

However, starting from Android R, text Toast can no longer be set with these parameters since the setter functions have become no-op functions,i.e.  
`í•˜ì§€ë§Œ ì•ˆë“œë¡œì´ë“œRë¶€í„°ëŠ” í…ìŠ¤íŠ¸ í† ìŠ¤íŠ¸ëŠ” ì„¸íŒ… í•¨ìˆ˜ê°€ í—ˆìš©ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë” ì´ìƒ ì„¤ì •ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`

a function can be called but do nothing. See below for the screenshots of the setGravity official documentation.
`í•¨ìˆ˜ëŠ” í˜¸ì¶œë  ìˆ˜ ìˆì§€ë§Œ ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í•˜ë‹¨ ìŠ¤í¬ë¦°ìƒ· ê³µì‹ë¬¸ì„œì˜ "setGravity"ë¥¼ í™•ì¸í•˜ì„¸ìš”.`
![img_2.png](img_2.png)

However, this new implementation is only applied to text Toast only. 
`ê·¸ëŸ¬ë‚˜ ì´ë²ˆ ìƒˆë¡œìš´ êµ¬í˜„ì€ ì˜¤ì§ í…ìŠ¤íŠ¸ í† ìŠ¤íŠ¸ì— ì ìš©ë©ë‹ˆë‹¤.`

In other words, the simple Toast , which is constructed by Toast(context: Context) can still be customised with margins and gravity with offsets. See below for the illustration:
`ìš”ì•½í•˜ìë©´, Toast(context: Context)ì— ì˜í•´ ë§Œë“¤ì–´ì§„ ì‹¬í”Œ í† ìŠ¤íŠ¸ëŠ” ì—¬ì „íˆ ì—¬ë°±ê³¼ ìœ„ì¹˜ë¥¼ ì»¤ìŠ¤í…€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`

###3. Deprecated function â€” setView()
![img_1.png](img_1.png)
Although it is still allowed to customise the Toast view by setView(view: View), 
`ë¹„ë¡ í† ìŠ¤íŠ¸ë·°ì— setViewë¥¼ ì»¤ìŠ¤í…€í•˜ëŠ” ê²ƒì´ í—ˆìš©ë˜ì§€ë§Œ`
it is actually a deprecated function in Android R.
`ì•ˆë“œë¡œì´ë“œ Rì—ì„  ì´ í•¨ìˆ˜ëŠ” ì‚¬ì‹¤ ë””í”„ë¦¬ì¼€ì´í‹°ë“œ í•¨ìˆ˜ì…ë‹ˆë‹¤.`

â€œDeprecatedâ€ means the function can still be used at the current moment but it is probably going to be removed in the future Android version. 
`"Deprecated"ëŠ” í˜„ì¬ ì‹œì ì—ì„œ ì—¬ì „íˆ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ ì•ˆë“œë¡œì´ë“œ ë¯¸ë˜ ë²„ì „ì—ì„  ì‚­ì œë  ê²ƒì´ë¼ëŠ”ê±¸ ì˜ë¯¸í•©ë‹ˆë‹¤.`

Developer is recommended to avoid using this function for long term development.
`ê°œë°œìë“¤ì€ ì˜¤ëœ ê°œë°œ ê¸°ê°„ë™ì•ˆ ê·¸ëŸ° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í”¼í•  ê±¸ ê¶Œì¥ë©ë‹ˆë‹¤.`

### 4. Newly added callback â€” Toast.Callback
A new callback (Toast.Callback) is added to notify when Toast is shown and hidden. 
`í† ìŠ¤íŠ¸ê°€ ìƒê¸°ê³  ì‚¬ë¼ì§ˆ ë•Œë¥¼ ì•Œë¦´ ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ ì½œë°±ì´ ì¶”ê°€ë©ë‹ˆë‹¤.`
It can be added to a Toast easily by:
`ë‹¤ìŒê³¼ ê°™ì´ ì‰½ê²Œ í† ìŠ¤íŠ¸ì— ì¶”ê°€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`

```
val fooToast = Toast.makeText(this, "Simple toast message", Toast.LENGTH_SHORT)
fooToast.addCallback(object: Toast.Callback() {
  override fun onToastShown() {
    super.onToastShown()
    // Do you own stuff
  }

  override fun onToastHidden() {
    super.onToastHidden()
    // Do you own stuff
  }
})
fooToast.show()
```